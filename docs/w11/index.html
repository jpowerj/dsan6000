<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amit Arora and Jeff Jacobs">

<title>Week 11: Vector Databases ‚Äì DSAN 6000 Slide Hub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-0d4a9d19931feb4fee1ddab4b2489000.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" '="" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dreampulse/computer-modern-web-font@master/fonts.css"><script src="../sidebar.js"></script><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Honk&amp;display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../dsan-globals/jjstyles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../w11/index.html">Week 11: <span class="sec-w11-date">Nov 10</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DSAN 6000 Slide Hub</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://gu-dsan.github.io/6000-fall-2025/" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-arrow-left-short pe-1"></i> Main Course Page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: Aug 28</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: <span class="sec-w02-date">Sep 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3: <span class="sec-w03-date">Sep 8</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4: <span class="sec-w04-date">Sep 15</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: <span class="sec-w05-date">Sep 22</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6: <span class="sec-w06-date">Sep 29</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: <span class="sec-w07-date">Oct 6</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8: <span class="sec-w08-date">Oct 20</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9: <span class="sec-w09-date">Oct 27</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w10/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 10: <span class="sec-w10-date">Nov 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w11/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 11: <span class="sec-w11-date">Nov 10</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w12/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 12: <span class="sec-w12-date">Nov 17</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w13/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 13: <span class="sec-w13-date">Nov 24</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w14/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 14: <span class="sec-w14-date">Dec 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w15/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 15: <span class="sec-w15-date">Dec 8</span></span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.zoom.us/j/91628796534?pwd=BSnBpL4VeysAQMbUtbH4MmwOunglLh.1" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">S01 (Mon) Zoom Link <i class="bi bi-box-arrow-up-right ps-1" style="font-size: 75%;"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.zoom.us/j/92724737140?pwd=rIyVrsa3CDq9xCv4LGNX3Cq0o2J3An.1" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">S02 (Thu) Zoom Link <i class="bi bi-box-arrow-up-right ps-1" style="font-size: 75%;"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=9ebe4700-c41f-434a-bb78-b34801332737" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Recordings <i class="bi bi-box-arrow-up-right ps-1" style="font-size: 75%;"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jjacobs.me/meet" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Book Office Hour <i class="bi bi-box-arrow-up-right ps-1" style="font-size: 75%;"></i></span></a>
  </div>
</li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p><em>Updated 2025-11-10, 04:25:01 AM</em></p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#vector-spaces-the-geometry-of-ai" id="toc-vector-spaces-the-geometry-of-ai" class="nav-link active" data-scroll-target="#vector-spaces-the-geometry-of-ai">Vector Spaces: The Geometry of AI!</a>
  <ul class="collapse">
  <li><a href="#word-counts-good-enough" id="toc-word-counts-good-enough" class="nav-link" data-scroll-target="#word-counts-good-enough">Word Counts: Good Enough?</a></li>
  <li><a href="#whats-missing-context" id="toc-whats-missing-context" class="nav-link" data-scroll-target="#whats-missing-context">What‚Äôs Missing? Context!</a></li>
  <li><a href="#basic-context-engineering" id="toc-basic-context-engineering" class="nav-link" data-scroll-target="#basic-context-engineering">Basic Context Engineering</a></li>
  <li><a href="#pretentious-but-helpful-terms" id="toc-pretentious-but-helpful-terms" class="nav-link" data-scroll-target="#pretentious-but-helpful-terms">Pretentious But Helpful Terms!</a></li>
  <li><a href="#how-do-we-actually-get-these-vectors" id="toc-how-do-we-actually-get-these-vectors" class="nav-link" data-scroll-target="#how-do-we-actually-get-these-vectors">How Do We Actually <em>Get</em> These Vectors?</a></li>
  </ul></li>
  <li><a href="#now-we-put-these-embeddings-vectors-into-databases" id="toc-now-we-put-these-embeddings-vectors-into-databases" class="nav-link" data-scroll-target="#now-we-put-these-embeddings-vectors-into-databases">Now We Put These Embeddings (Vectors) into <em>Databases</em></a>
  <ul class="collapse">
  <li><a href="#vector-search-workflow" id="toc-vector-search-workflow" class="nav-link" data-scroll-target="#vector-search-workflow">Vector Search Workflow</a></li>
  <li><a href="#unstructured-data-leadsto-structured-geometric-query-space" id="toc-unstructured-data-leadsto-structured-geometric-query-space" class="nav-link" data-scroll-target="#unstructured-data-leadsto-structured-geometric-query-space">Unstructured Data <span class="math inline">\(\leadsto\)</span> Structured Geometric Query Space</a></li>
  <li><a href="#more-data-leadsto-increasing-returns" id="toc-more-data-leadsto-increasing-returns" class="nav-link" data-scroll-target="#more-data-leadsto-increasing-returns">More Data <span class="math inline">\(\leadsto\)</span> ‚ÄúIncreasing Returns‚Äù</a></li>
  <li><a href="#queries-embedded-via-the-same-model" id="toc-queries-embedded-via-the-same-model" class="nav-link" data-scroll-target="#queries-embedded-via-the-same-model">Queries Embedded via the <em>Same</em> Model!</a></li>
  </ul></li>
  <li><a href="#lab-time" id="toc-lab-time" class="nav-link" data-scroll-target="#lab-time">Lab Time!</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jpowerj/dsan6000/blob/main/w11/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 11: Vector Databases</h1>
<p class="subtitle lead"><em>DSAN 6000: Big Data and Cloud Computing</em><br>Fall 2025</p>
  <div class="quarto-categories">
    <div class="quarto-category">Class Sessions</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Amit Arora and Jeff Jacobs </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="mailto:jj1088@georgetown.edu" target="_blank"><code>jj1088@georgetown.edu</code></a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Monday, November 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<center class="mb-3">
<a class="h2" href="./slides.html" target="_blank">Open slides in new tab ‚Üí</a>
</center>
<section id="vector-spaces-the-geometry-of-ai" class="level1 not-title-slide smaller crunch-title title-12" data-stack-name="Embeddings Overview">
<h1 class="not-title-slide smaller crunch-title title-12" data-stack-name="Embeddings Overview">Vector Spaces: The Geometry of AI!</h1>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/vector-space-query.jpeg" class="img-fluid figure-img"></p>
<figcaption><a href="https://weaviate.io/blog/vector-search-explained">Image source</a></figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Why <strong>vector</strong> spaces over <strong>keyword</strong> matching?</li>
<li>What if words have different <strong>meanings</strong> in different <strong>contexts</strong>?</li>
</ul>
</div>
</div>
<section id="word-counts-good-enough" class="level2 smaller crunch-title title-12">
<h2 class="smaller crunch-title title-12 anchored" data-anchor-id="word-counts-good-enough">Word Counts: Good Enough?</h2>
<p>Just four keywords per section:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Section</th>
<th>Keywords</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>U.S.</td>
<td><code>state</code>, <code>court</code>, <code>federal</code>, <code>republican</code></td>
</tr>
<tr class="even">
<td>World</td>
<td><code>government</code>, <code>country</code>, <code>officials</code>, <code>minister</code></td>
</tr>
<tr class="odd">
<td>Arts</td>
<td><code>music</code>, <code>show</code>, <code>art</code>, <code>dance</code></td>
</tr>
<tr class="even">
<td>Sports</td>
<td><code>game</code>, <code>league</code>, <code>team</code>, <code>coach</code></td>
</tr>
<tr class="odd">
<td>Real Estate</td>
<td><code>home</code>, <code>bedrooms</code>, <code>bathrooms</code>, <code>building</code></td>
</tr>
</tbody>
</table>
<p>For each article, vote for section with highest keyword count:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 1%">
<col style="width: 10%">
<col style="width: 22%">
<col style="width: 14%">
<col style="width: 19%">
<col style="width: 21%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Arts</th>
<th>Real Estate</th>
<th>Sports</th>
<th>U.S. News</th>
<th>World News</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Correct</td>
<td>3020</td>
<td>690</td>
<td>4860</td>
<td>1330</td>
<td>1730</td>
<td><strong>11630</strong></td>
</tr>
<tr class="even">
<td>Incorrect</td>
<td>750</td>
<td>60</td>
<td>370</td>
<td>1100</td>
<td>590</td>
<td><strong>2870</strong></td>
</tr>
<tr class="odd">
<td>Accuracy</td>
<td><strong>0.801</strong></td>
<td><strong>0.920</strong></td>
<td><strong>0.929</strong></td>
<td><span class="redbox"><strong>0.547</strong></span></td>
<td><span class="redbox"><strong>0.746</strong></span></td>
<td><strong>0.802</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="whats-missing-context" class="level2 crunch-title">
<h2 class="crunch-title anchored" data-anchor-id="whats-missing-context">What‚Äôs Missing? Context!</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><em>You shall know a word by the company it keeps.</em> <span class="citation" data-cites="firth_papers_1957">(<a href="#ref-firth_papers_1957" role="doc-biblioref">Firth 1957</a>)</span></p>
</div>
</div>
</div>
<div class="columns" style="font-size: 75%;">
<div class="column" style="width:50%;">
<center>
<p><strong>Article A</strong> (World News):</p>
</center>
<!-- President Vladimir V. Putin told Russia's natural gas monopoly, Gazprom, on Saturday to continue selling subsidized gas to Ukraine until the end of March if Ukraine agrees to pay market prices beginning in April. Mr. Putin's order, delivered on national television as Gazprom threatened to cut off gas exports for Ukraine beginning on Jan. 1, put Russia's president in the center of a dispute that has caused Europe to worry whether its gas supply will be disrupted in the January chill. Ukraine replied warily. The office of President Viktor A. Yushchenko noted that ''negotiations of the settlement of the gas problem have crossed into a new phase.'' A spokesman for Yury I. Yekhanurov, Ukraine's prime minister, was quoted by Interfax saying that Ukraine agreed to a transition to market prices, but the details require negotiations. Mr. Putin gave Ukraine until midnight Saturday to accept his terms. -->
<p><strong>President Bush</strong> said he was trying to convince <strong>President Vladimir Putin</strong> of Russia that cooperation was ‚Äúin Russia‚Äôs security interests,‚Äù even though Defense Secretary Robert M. Gates did not win Mr.&nbsp;Putin‚Äôs support during a trip to Moscow last week.</p>
<p><a href="https://www.nytimes.com/2007/05/01/world/europe/01prexy.html">‚ÄúBush Steps Up Effort to Persuade Putin on Missile Defense Plan‚Äù</a>, <em>NYTimes</em>, 1 May 2007.</p>
</div><div class="column" style="width:50%;">
<center>
<p><strong>Article B</strong> (U.S. News):</p>
</center>
<p><strong>President Bush</strong> began his day yesterday at dawn on the <strong>golf</strong> course. He began Saturday on the golf course, too. A weekend earlier, the president played two rounds of 18 holes on the course at Andrews Air Force Base just outside Washington.</p>
<p><a href="https://www.nytimes.com/2002/08/05/us/white-house-letter-bush-makes-quick-work-of-relaxing.html">‚ÄúWhite House Letter; Bush Makes Quick Work of Relaxing‚Äù</a>, <em>NYTimes</em>, 5 August 2002.</p>
</div>
</div>
</section>
<section id="basic-context-engineering" class="level2 smaller text-65 crunch-title inline-90 crunch-ul crunch-li-8">
<h2 class="smaller text-65 crunch-title inline-90 crunch-ul crunch-li-8 anchored" data-anchor-id="basic-context-engineering">Basic Context Engineering</h2>
<ul>
<li>What exactly do we mean when we say <strong>‚Äúcontext‚Äù</strong>?</li>
<li>Different <strong>training objectives</strong> give different types of contexts!</li>
<li>Example: Closest vectors to <strong>Turing</strong>, trained on Wikipedia in two ways:</li>
</ul>
<p><br></p>
<table>
<thead>
<tr>
<th>
</th>
<th class="bb" width="25%">
Dependency Tree
</th>
<th>
5-Word Window
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="bb tb">
Same category <span class="math inline">\(\rightarrow\)</span>
</td>
<td class="ln tb bn">
Pauling
</td>
<td class="rn bn lb">
nondeterministic
</td>
<td class="bb">
<span class="math inline">\(\leftarrow\)</span> Topically related
</td>
</tr>
<tr>
<td class="bn tdc">
<em>(Paradigmatic)</em>
</td>
<td class="lb bn">
Hotelling
</td>
<td class="rb bn">
computability
</td>
<td class="bn tdc">
<em>(Syntagmatic)</em>
</td>
</tr>
<tr>
<td class="bn">
</td>
<td class="lb bn">
Lessing
</td>
<td class="rb bn">
deterministic
</td>
<td class="bn">
</td>
</tr>
<tr>
<td>
</td>
<td class="lb bb">
Hamming
</td>
<td class="rb bb">
finite-state
</td>
<td class="bn">
</td>
</tr>
</tbody>
<caption style="text-align: center; font-size: 90%;">
Example from Uber AI Labs‚Äô amazing <a href="https://w4nderlu.st/teaching/word-embeddings">Piero Molina</a>
</caption>
</table>
</section>
<section id="pretentious-but-helpful-terms" class="level2 smaller crunch-title">
<h2 class="smaller crunch-title anchored" data-anchor-id="pretentious-but-helpful-terms">Pretentious But Helpful Terms!</h2>
<ul>
<li><strong>Paradigmatic</strong> <span class="math inline">\(\approx\)</span> Grammatical ‚Äúsubstitutes‚Äù, drawn from same category/type</li>
<li><strong>Syntagmatic</strong> <span class="math inline">\(\approx\)</span> semantic relationships between words in a sentence</li>
</ul>
<p><br></p>
<style>
.top-cb1 {
  border-top: 3px solid #e69f00 !important;
}
.left-cb1 {
  border-left: 3px solid #e69f00 !important;
}
.right-cb1 {
  border-right: 3px solid #e69f00 !important;
}
.bottom-cb1 {
  border-bottom: 3px solid #e69f00 !important;
}
.top-cb2 {
  border-top: 3px solid #56b4e0 !important;
}
.left-cb2 {
  border-left: 3px solid #56b4e0 !important;
}
.right-cb2 {
  border-right: 3px solid #56b4e0 !important;
}
.bottom-cb2 {
  border-bottom: 3px solid #56b4e0 !important;
}
.bg-mix {
  background-color: #9EAA7550 !important;
}
.top-mix {
  border-top: 3px solid #9EAA7590 !important;
}
.bottom-mix {
  border-bottom: 3px solid #9EAA7590 !important;
}
.left-mix {
  border-left: 3px solid #9EAA7590 !important;
}
.right-mix {
  border-right: 3px solid #9EAA7590 !important;
}
.top-none {
  border-top: 0px solid white !important;
}
.bottom-none {
  border-bottom: 0px solid white !important;
}
.right-none {
  border-right: 0px solid white !important;
}
.left-none {
  border-left: 0px solid white !important;
}
</style>
<table>
<thead>
<tr>
<th class="bottom-none">
</th>
<th class="top-cb2 left-cb2 right-cb2 cb2a-bg" align="center">
Paradigmatic<br>‚Üì
</th>
<th class="bottom-none">
</th>
<th class="top-cb2 left-cb2 right-cb2 cb2a-bg" align="center">
Paradigmatic<br>‚Üì
</th>
<th class="bottom-none">
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="top-none bottom-none">
</td>
<td class="tdc bg-mix top-cb1 left-cb1 bottom-cb1 right-mix">
<code>apples</code>
</td>
<td class="tdc cb1a-bg top-cb1 bottom-cb1 right-none left-mix">
‚Üê <strong>Syntagmatic</strong> ‚Üí
</td>
<td class="tdc bg-mix top-cb1 right-cb1 bottom-cb1 left-mix">
<code>sweet</code>
</td>
<td class="bottom-none">
</td>
</tr>
<tr>
<td class="top-none">
</td>
<td class="tdc bg-mix left-cb1 bottom-cb1 top-cb1 right-mix">
<code>oranges</code>
</td>
<td class="tdc cb1a-bg top-cb1 bottom-cb1 right-none left-none">
‚Üê <strong>Syntagmatic</strong> ‚Üí
</td>
<td class="tdc bg-mix top-cb1 right-cb1 bottom-cb1 left-mix">
<code>sour</code>
</td>
<td>
</td>
</tr>
<tr>
<td class="tdc" style="font-size: 150%;">
These
</td>
<td class="tdc left-cb2 right-cb2 bottom-cb2" style="font-size: 150%;">
<span class="math inline">\(\underline{\hspace{32mm}}\)</span>
</td>
<td class="tdc" style="font-size: 150%;">
taste very
</td>
<td class="tdc left-cb2 right-cb2 bottom-cb2" style="font-size: 150%;">
<span class="math inline">\(\underline{\hspace{32mm}}\)</span>
</td>
<td class="tdc" style="font-size: 150%;">
!
</td>
</tr>
</tbody>
<caption style="font-size: 90%; text-align: center;">
<br><em>(Both terms from <span class="citation" data-cites="saussure_course_1916">Saussure (<a href="#ref-saussure_course_1916" role="doc-biblioref">1916</a>)</span>)</em>
</caption>
</table>
</section>
<section id="how-do-we-actually-get-these-vectors" class="level2 smaller crunch-title crunch-ul title-11 inline-90">
<h2 class="smaller crunch-title crunch-ul title-11 inline-90 anchored" data-anchor-id="how-do-we-actually-get-these-vectors">How Do We Actually <em>Get</em> These Vectors?</h2>
<div class="r-stretch">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/matrix_decomposition.svg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
<ul>
<li><em>High-level goal</em>: <strong>Retain</strong> information about <strong>word-context relationships</strong> while <strong>reducing</strong> the <span class="math inline">\(M\)</span>-dimensional representations of each word down to 3 dimensions.</li>
<li><em>Low-level goal</em>: Generate <strong>rank-<span class="math inline">\(K\)</span></strong> matrix <span class="math inline">\(\mathbf{W}\)</span> which <strong>best approximates</strong> distances between words in <span class="math inline">\(M\)</span>-dimensional space (rows in <span class="math inline">\(\mathbf{X}\)</span>)</li>
</ul>
</section>
</section>
<section id="now-we-put-these-embeddings-vectors-into-databases" class="level1" data-stack-name="Vector Databases">
<h1 data-stack-name="Vector Databases">Now We Put These Embeddings (Vectors) into <em>Databases</em></h1>
<ul>
<li>The goal: identify <strong>similar</strong> object as vectors ‚Äúclose to‚Äù the location (in vector space) of a given <strong>query</strong></li>
</ul>
<section id="vector-search-workflow" class="level2">
<h2 class="anchored" data-anchor-id="vector-search-workflow">Vector Search Workflow</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/vector_search.png" class="img-fluid figure-img"></p>
<figcaption><a href="https://zilliz.com/learn/what-is-vector-database">Image Source</a></figcaption>
</figure>
</div>
</section>
<section id="unstructured-data-leadsto-structured-geometric-query-space" class="level2 smaller crunch-title crunch-img">
<h2 class="smaller crunch-title crunch-img anchored" data-anchor-id="unstructured-data-leadsto-structured-geometric-query-space">Unstructured Data <span class="math inline">\(\leadsto\)</span> Structured Geometric Query Space</h2>
<div id="fig-embed-images" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-embed-images-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/embedding_carrot.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/embedding_car.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-embed-images-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig&nbsp;1: <a href="https://www.youtube.com/watch?v=ebMkbWzFCnA&amp;t=80s">Image Source</a>
</figcaption>
</figure>
</div>
</section>
<section id="more-data-leadsto-increasing-returns" class="level2 smaller crunch-title crunch-img crunch-quarto-figure">
<h2 class="smaller crunch-title crunch-img crunch-quarto-figure anchored" data-anchor-id="more-data-leadsto-increasing-returns">More Data <span class="math inline">\(\leadsto\)</span> ‚ÄúIncreasing Returns‚Äù</h2>
<div class="quarto-layout-panel" data-layout="[[1,1],[1]]">
<div class="quarto-layout-row quarto-layout-valign-center">
<div class="cap-right quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-right">
<figure class="figure">
<p><img src="images/vector_space_cars.jpeg" class="img-fluid figure-img" width="260"></p>
<figcaption>Learn about <strong>vehicles</strong> from one dataset‚Ä¶</figcaption>
</figure>
</div>
</div>
<div class="cap-left quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/vector_space_food.jpeg" class="img-fluid figure-img" width="274"></p>
<figcaption>Learn about <strong>foods</strong> from another dataset‚Ä¶</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-center">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/vector_space_color.jpeg" class="img-fluid figure-img" width="570"></p>
<figcaption>Learn about <strong>color</strong> from both ü§Ø</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="queries-embedded-via-the-same-model" class="level2 smaller crunch-title title-11">
<h2 class="smaller crunch-title title-11 anchored" data-anchor-id="queries-embedded-via-the-same-model">Queries Embedded via the <em>Same</em> Model!</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/vector-db-query.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="lab-time" class="level1" data-stack-name="Lab 11">
<h1 data-stack-name="Lab 11">Lab Time!</h1>
<ul>
<li>Lab 11 on <a href="https://georgetown.instructure.com/courses/213755/assignments/1280778">Canvas</a></li>
<li>Lab 11 on <a href="https://classroom.github.com/a/Ek1Auxq3">GitHub Classroom</a></li>
</ul>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-firth_papers_1957" class="csl-entry" role="listitem">
Firth, John Rupert. 1957. <em>Papers in <span>Linguistics</span>, 1934-1951</em>. Oxford University Press.
</div>
<div id="ref-saussure_course_1916" class="csl-entry" role="listitem">
Saussure, Ferdinand de. 1916. <em>Course in <span>General Linguistics</span></em>. Open Court.
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jpowerj/dsan6000/blob/main/w11/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>