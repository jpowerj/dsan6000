;/*FB_PKG_DELIM*/

__d("MinGapType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6,FB_STORIES:7,HIGH_VALUE_PROMOTION:8,FB_STORIES_ENGAGEMENT:9,PYMK:10,SHOWCASE:11,FB_SHORTS:12,TRENDING:13,IFR:14,ENGAGEMENT_QP:15,GROUPS_TAB_UNCONNECTED:16,END_OF_FEED_REELS:17,FRIEND_REQUESTS:18,FB_SHORTS_FALLBACK:19,FRIENDLY_FEED_BIRTHDAYS:20,FRIENDLY_FEED_FRIEND_REQUESTS:21,FRIENDLY_FEED_MID_CARD:22,FRIENDLY_FEED_PROMOTION:23,INJECTED_STORY:24,LIMITED_PERSONALIZATION_NOTICE:25,FRIENDS_FEED_BADGED:26,FRIENDLY_FEED_PROMOTION_GAP_3:27}),l=e;i.default=l}),66);
__d("AdsExtremeGapUtils",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=3,s=6;function u(e,t){if(t!==5)return!1;var n=r("gkx")("23035");if(!n)return!1;var o=c(e,0);return o>s}function c(t,n){if(t.length===0||n>s)return n;var r=t.length,o=d(t);return o===-1?n:r-o<=e?c(t.slice(0,o),n+1):n}function d(e){for(var t=e.length-1;t>=0;t--)if(e[t].minGapType===5)return t;return-1}l.EXTREME_GAP_DISTANCE=e,l.shouldApplyExtremeGapProtection=u,l.getLastSponsoredStoryPosition=d}),98);
__d("BrandSafetyOpportunityLossRateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1305"),s=o("FalcoLoggerInternal").create("brand_safety_opportunity_loss_rate",e),u=s;l.default=u}),98);
__d("Comet2ndChannelContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("CometAdsProductLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5479"),s=o("FalcoLoggerInternal").create("comet_ads_product_logging",e),u=s;l.default=u}),98);
__d("CometFeedUnitStatusTrackingUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.map(function(e,n){return t(e)?babelHelpers.extends({},e,{position:n}):null}).filter(Boolean)}function l(e){return e.filter(m)}function s(e){return e.filter(p)}function u(e){return e.filter(_)}function c(e){return e.filter(function(e){return e.status==="received"||e.status==="positioned"})}function d(e){var t=e.reduce(function(e,t,n){return _(t)?n:e},-1);return e.map(function(e,n){return n<=t&&!_(e)?babelHelpers.extends({},e,{status:"rendered"}):e})}function m(e){return e.status==="rendered"}function p(e){return e.status!=="error"}function _(e){return e.status==="rendered"||e.status==="error"||e.status==="positioned"}i.getFeedUnitsWithOriginalPosition=e,i.getCurrentlyVisibleFeedUnits=l,i.getPossiblyVisibleFeedUnits=s,i.getAllPositionedFeedUnits=u,i.getUncommittedFeedUnits=c,i.getFeedUnitsWithRenderingOutOfOrderFixed=d,i.isCurrentlyVisible=m,i.isPossiblyVisible=p,i.isAnyPositionedType=_}),66);
__d("CometAdsProductLogger",["AdsExtremeGapUtils","CometAdsProductLoggingFalcoEvent","CometFeedUnitStatusTrackingUtils","WebSession"],(function(t,n,r,o,a,i,l){"use strict";var e="SPONSORED",s="comet.home";function u(t){var n=t.adId,o=t.csp,a=t.cts,i=t.endPoint,l=t.getFeedUnitStatusList,s=t.hba,u=t.isv,d=t.minGapRule,m=t.minGapType,p=t.sessionKey,_=t.tracking,f=t.vp;m!==e||d==null||n==null||(r("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:n,csp:o,endpoint:i,event:"impression",hba:s,isv:u,min_gap_shape:{min_gap_rule:d.toString(),min_gap_type:m},session_key:p,timestamp:a,tracking:_,vp:f}}),c({adId:n,csp:o,cts:a,endPoint:i,getFeedUnitStatusList:l,hba:s,isv:u,minGapRule:d,minGapType:m,sessionKey:p,tracking:_,vp:f}))}function c(e){var t=e.adId,n=e.csp,a=e.cts,i=e.endPoint,l=e.getFeedUnitStatusList,s=e.hba,u=e.isv,c=e.minGapRule,d=e.minGapType,m=e.sessionKey,p=e.tracking,_=e.vp;if(!(l==null||n==null)){var f=l(),g=o("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(f,o("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible),h=parseInt(n,10),y=g.slice(0,h-1),C=o("AdsExtremeGapUtils").shouldApplyExtremeGapProtection(y,5);if(C){var b=h-o("AdsExtremeGapUtils").getLastSponsoredStoryPosition(y);r("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:t,csp:n,endpoint:i,event:"extreme_experience",hba:s,isv:u,min_gap_shape:{min_gap_rule:c!=null?c.toString():null,min_gap_type:d},product_features:b<=o("AdsExtremeGapUtils").EXTREME_GAP_DISTANCE?"not protected":"protected",session_key:m,timestamp:a,tracking:p,vp:_}})}}}function d(e){var t=e.endPoint,n=t===void 0?s:t,a=e.minGapRule,i=e.minGapType,l=Date.now(),u=Math.floor(l/1e3);r("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:null,csp:"0",endpoint:n,event:"impression",hba:!1,isv:null,min_gap_shape:{min_gap_rule:a!=null?a.toString():null,min_gap_type:i},product_features:"highest_position_ad_from_multifeed",session_key:o("WebSession").getId(),timestamp:u.toString(),tracking:null,vp:null}})}l.logCometAdsProductGapRule=u,l.logCometAdsProductGapRuleExtremeExperience=c,l.logCometFeedHighestPositionAd=d}),98);
__d("CometFeed5sImpressionDelayContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({firstAdStoryPosition:null,firstLoggedAdImpressionStoryPosition:null,hasAnyAdImpressionAlreadyBeenLogged:!1,hasUserSeenAnyAd:!1});l.default=u}),98);
__d("CometFeedBrandSafetyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("CometFeedBrandSafetyLoggingUtil",["CometFeedUnitStatusTrackingUtils","FBLogger","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){if(e==null||t==null)return a&&r("FBLogger")("comet_feed_impression_null_brs_field").warn("Unable to get brs data for position %s. Debug: isAd: %s, feedUnitStatusList: %s, brsRegistry: %s",n,a,JSON.stringify(e?e():null),JSON.stringify(t?t():null)),null;var i=e(),l=o("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(i,o("CometFeedUnitStatusTrackingUtils").isPossiblyVisible),d=l.findIndex(function(e){return e.position===n});if(!s(l,d))return a&&r("FBLogger")("comet_feed_impression_null_brs_field_unsponsored").warn("Impression at nonErrorFeedUnit index %s was determined to be non sponsored. Debug: storyPosition: %s, isAd: %s, nonErrorFeedUnits: %s, feedUnitStatusList: %s, brsRegistry: %s",d,n,a,JSON.stringify(l),JSON.stringify(e()),JSON.stringify(t())),null;var p=t(),_=u(l,p,d-1),f=u(l,p,d+1),g=c(l,p,d);return{brs_filter_setting:g,feed_size:l.length.toString(),feed_state:m(p),unit_after:f,unit_before:_}}function s(e,t){var n;return((n=e[t])==null?void 0:n.category)==="SPONSORED"}function u(e,t,n){var r,o=d(e,t,n);return o&&{brs_content_label:(r=o.brsContentLabel)==null?void 0:r.toString(),organic_tracking:o.tracking,unit_type:o.unitType}}function c(e,t,n){var r,o=d(e,t,n);return o==null||(r=o.brsFilterSetting)==null?void 0:r.toString()}function d(e,t,n){var o=e[n];if(o==null)return null;var a=o.key,i=t.feedUnitRegistry[a];return i==null&&o.status==="rendered"?r("FBLogger")("comet_feed_unit_brand_safety_null_brs_info").warn("Unable to find a CometFeedUnitBrandSafetyInfo for position %s and deduplicationKey %s. feedUnitStatusList: %s. brsRegistry: %s",n,o.key,JSON.stringify(e),JSON.stringify(Object.keys(t.feedUnitRegistry))):o.status==="error"&&r("FBLogger")("comet_feed_unit_brand_safety_error_status").mustfix("CometFeedUnitStatus is error for position %s and deduplicationKey %s. feedUnitStatusList: %s. brsRegistry: %s",n,o.key,JSON.stringify(e),JSON.stringify(Object.keys(t.feedUnitRegistry))),i}function m(e){var t=e.feedStateInfoRef.current;if(t==null)return r("FBLogger")("comet_feed_unit_brand_safety_feed_state").mustfix("feedStateInfo was not initialized correctly"),"feed_uninitialized_state_info";var n=t.hasMore,o=t.isEOFError,a=t.isLoading,i=t.showEOFMessageAfterFeedStoppedLoading,l=r("NetworkStatus").isOnline();return o?l?"feed_eof_error_while_online":"feed_eof_error_while_offline":i?l?"feed_eof_no_more_stories_while_online":"feed_eof_no_more_stories_while_offline":n&&a?"feed_has_more_and_is_loading":n?"feed_has_more":a?"feed_is_loading":"feed_unknown"}l.getBrandSafetyFieldForAdImpression=e}),98);
__d("CometFeedSessionIDContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(-1);l.default=u}),98);
__d("CometFeedUnitStatusListPassiveContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("DebugOwl",["cr:1801726"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){},s=n("cr:1801726")!=null?n("cr:1801726"):{burrow:e,flap:e,fly:e,hoot:e,listen:function(){return e},nest:e,peck:e,perch:e,swoop:e,getBlockedDebugOwlElements:function(){return new Map}},u=s;l.default=u}),98);
__d("cometGHLContentDisplayCheck",["cr:1824699"],(function(t,n,r,o,a,i,l){"use strict";var e=!0,s=!1;function u(t){if(c(t))return e;var r=document.body,o=r==null||!r.contains(t);if(n("cr:1824699")&&n("cr:1824699").flap(t,{notMounted:o}),o)return e;var a=t.offsetHeight===0;if(n("cr:1824699")&&n("cr:1824699").flap(t,{zeroHeight:a}),a)return s;var i=Array.from(t.getElementsByTagName("img")),l=i.length===0;if(n("cr:1824699")&&n("cr:1824699").flap(t,{noImages:l}),i.length===0)return e;var u=i.find(d)!=null;if(n("cr:1824699")&&n("cr:1824699").flap(t,{hasImageWithSize:u}),u)return e;var p=Array.from(t.getElementsByTagName("svg"));if(p.find(m)!=null)return e;var _=Array.from(t.getElementsByTagName("i"));return _.find(m)!=null?e:(n("cr:1824699")&&n("cr:1824699").flap(t,{noSuccessfulChecks:!0}),s)}var c=function(t){for(var e of t.children){var n;if(((n=e.dataset)==null?void 0:n.virtualized)==="true")return!t.style.display}return!1},d=function(t){return t.offsetHeight+t.offsetWidth>0},m=function(t){var e=t.getBoundingClientRect();return e.height*e.width>0};l.default=u}),98);
__d("CometGHLDisplayMonitor",["DebugOwl","FBLogger","GHLGating","clearTimeout","cometGHLContentDisplayCheck","setTimeoutCometLoggingPri"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=1e3,u=null,c=!1,d=new Set,m=function(n,o){e.has(n)||e.set(n,new Set);var t=e.get(n);return t==null?(r("FBLogger")("GHL").mustfix("Expected Set to be declared for container"),{dispose:function(){}}):(t.add(o),u===null&&p(),{dispose:function(){t.delete(o),t.size===0&&(e.delete(n),e.size===0&&(r("clearTimeout")(u),u=null))}})},p=function(){e.forEach(function(e,t){var n=t.current;n==null||g(n)||!r("cometGHLContentDisplayCheck")(n)||e.forEach(function(e,t){var n=t.onLogBlockCallback,o=t.startTime,a=t.targetRef,i=a.current;if(r("DebugOwl").hoot(i),i!=null){var l=g(i)!=null;if(r("DebugOwl").flap(i,{hiddenByFB:l}),!l){var s=r("cometGHLContentDisplayCheck")(i);if(!s){var u=Date.now()-o;n(u),f()}}}})}),u=r("setTimeoutCometLoggingPri")(p,s)},_=function(t){return d.add(t),c&&t(),{dispose:function(){d.delete(t)}}},f=function(){c!==!0&&(c=!0,d.forEach(function(e){return e()}))},g=function(t){return t.closest==null||t.closest(h)},h=(function(){return"."+"x1s85apg".split(" ").pop()+(o("GHLGating").getCometGhlContentVisibility()?",."+"xdps06".split(" ").pop():"")})();l.m=m,l.subscribeAny=_}),98);
__d("CometGHLTracker",["DebugOwl","GHLBox"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set;function s(t){r("DebugOwl").swoop(t),e.add(t),e.size>o("GHLBox").MinimumHiddenAdsToUpdateLocalStorage&&o("GHLBox").s(Date.now())}function u(t){return e.has(t)}function c(t){return e.delete(t)}function d(){return e.size>0}function m(){return e.size}l.m=s,l.c=u,l.d=c,l.b=d,l.s=m}),98);
__d("CometMetricsChannel2ViewabilityFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1960868"),s=o("FalcoLoggerInternal").create("comet_metrics_channel2_viewability",e),u=s;l.default=u}),98);
__d("CometMetricsFullViewFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1936086"),s=o("FalcoLoggerInternal").create("comet_metrics_full_view",e),u=s;l.default=u}),98);
__d("CometMetricsViewabilityFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1948176"),s=o("FalcoLoggerInternal").create("comet_metrics_viewability",e),u=s;l.default=u}),98);
__d("CometNewsFeedVPVDStore_newsFeedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"CometNewsFeedVPVDStore_newsFeedEdge"};a.exports=e}),null);
__d("CometNewsFeedVPVDStore",["CircularBuffer","CometNewsFeedVPVDStore_newsFeedEdge.graphql","CometRelay","emptyFunction","react","react-compiler-runtime","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useMemo,p=new Map;function _(e){e===void 0&&(e=0);var t=Array.from(p.entries()),n=0,r,o,a=!1;if(t.forEach(function(e,t){(!a&&e[1].start>=n||e[1].end==null)&&(n=e[1].start,o=t,a=a||e[1].end==null)}),o==null)return[];if(e>0)r=Math.max(0,o-(e-1));else{r=o;for(var i=o-1;i>=0&&t[i][1].end==null;i--)r=i}return t.slice(r,o+1).map(function(e){return e[0]})}function f(){p.clear()}var g=function(){var e=new(r("CircularBuffer"))(50);return{readRecentVPVDs:function(){var t=e.read();return e.clear(),t},writeRecentVPVD:function(n,a,i){var t,l,s,u,c,d,m=b(a),p=e.read().find(function(e){var t,n=e.vsid;return(m==null||(t=m.feed_backend_data)==null?void 0:t.vsid)===n});p||(e.write({client_vpv_token:r("uuidv4")(),evt:"vpv",feed_backend_data_serialized_payloads:m==null||(t=m.feed_backend_data)==null?void 0:t.serialized_payloads,fetch_tracking:m==null||(l=m.feed_backend_data)==null?void 0:l.should_recent_vpv_fetch_tracking_data,original_qid:m==null||(s=m.feed_backend_data)==null?void 0:s.original_qid,qid:m==null||(u=m.feed_backend_data)==null?void 0:u.qid,timestamp:i,vsid:m==null||(c=m.feed_backend_data)==null?void 0:c.vsid,vspos:m==null||(d=m.feed_backend_data)==null?void 0:d.vspos}),o("CometRelay").commitLocalUpdate(n,function(e){var t,n,r=e.get((t=(n=m.node)==null?void 0:n.id)!=null?t:"");r!=null&&r.setValue(!0,"__has_been_seen")}))}}},h=u.createContext(),y=u.createContext([r("emptyFunction"),r("emptyFunction")]);function C(e){var t=o("react-compiler-runtime").c(12),n=e.children,r=e.environment,a=e.newsFeedEdge,i=d(h),l,s;t[0]!==r||t[1]!==a||t[2]!==i?(s=function(t){var e;i&&i.writeRecentVPVD(r,a,t);var n=(e=b(a).feed_backend_data)==null?void 0:e.vsid;n!=null&&p.set(n,{end:null,start:Date.now()})},t[0]=r,t[1]=a,t[2]=i,t[3]=s):s=t[3];var c;t[4]!==a?(c=function(t){var e,n,r,o=(e=b(a).feed_backend_data)==null?void 0:e.vsid;o!=null&&p.set(o,{end:Date.now(),start:(n=(r=p.get(o))==null?void 0:r.start)!=null?n:Date.now()})},t[4]=a,t[5]=c):c=t[5];var m;t[6]!==s||t[7]!==c?(m=[s,c],t[6]=s,t[7]=c,t[8]=m):m=t[8],l=m;var _=l,f;return t[9]!==n||t[10]!==_?(f=u.jsx(y.Provider,{value:_,children:n}),t[9]=n,t[10]=_,t[11]=f):f=t[11],f}function b(t){return o("CometRelay").readInlineData(e!==void 0?e:e=n("CometNewsFeedVPVDStore_newsFeedEdge.graphql"),t)}l.readVisibleViewstateIDs=_,l.resetVisibleViewstateIDs=f,l.createStore=g,l.StoreContext=h,l.LoggerContext=y,l.LoggerProvider=C}),98);
__d("MerlinImpressionManager",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Enter","Exit","Update"]);function l(t,n,r,o,a){var i={itemId:r,status:e.Enter,time:t};c(i,o,a);var l={itemId:r,status:e.Exit,time:n};c(l,o,a)}function s(e,t){if(t[e]==null)return!1;var n=t[e].entries;if(n.length===0)return!1;var r=n[n.length-1];return r.exit!==0}function u(t,n){var r={entries:[],itemId:n.itemId};switch(n.status){case e.Enter:r=d(t,n);break;case e.Exit:r=m(t,n);break;case e.Update:break}return r}function c(e,t,n){var r=e.itemId,o=t[r];o==null&&(o={entries:[],itemId:r}),t[r]=u(o,e),s(r,t)&&(n(t[r].entries),delete t[r])}function d(e,t){var n={enter:t.time,exit:0};return babelHelpers.extends({},e,{entries:e.entries.concat(n)})}function m(e,t){var n=[].concat(e.entries),r=n[n.length-1];if(r==null)return e;if(r.enter!==0&&r.exit===0){var o={enter:r.enter,exit:t.time};n[n.length-1]=o}return babelHelpers.extends({},e,{entries:n})}i.MerlinImpressionStatus=e,i.logVisibilityTimestamps=l,i.mergeVPVData=u}),66);
__d("MerlinUnifiedProtocolEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1886750"),s=o("FalcoLoggerInternal").create("merlin_unified_protocol_event",e),u=s;l.default=u}),98);
__d("FBMerlinImpressionManager",["MerlinImpressionManager","MerlinUnifiedProtocolEventFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e="fb_unknown",s={},u=new Set([78]),c=new Map([[78,"fb_search"],[0,"fb_newsfeed"],[26,"fb_xar_comments"]]);function d(e){return!!(e===0||m(e))}function m(e){return e==null?!1:u.has(e)}function p(t,n,a,i,l){var u=function(n){var t=c.get(i);r("MerlinUnifiedProtocolEventFalcoEvent").log(function(){var r;return{element_visibility_absolute_ts:{min_visible_px:n.map(function(e){return{enter_ts:e.enter.toString(),exit_ts:e.exit.toString()}})},entity_id:a,origin:t!=null?t:e,payload:{placeholder_payload:(r=JSON.stringify(l))!=null?r:"{}"}}})};o("MerlinImpressionManager").logVisibilityTimestamps(t,n,a,s,u)}var _={isMerlinVPVOnlySources:m,logWithEnterAndExitTimestamps:p,merlinShouldLog:d};l.default=_}),98);
__d("GhlSwankFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1955947"),s=o("FalcoLoggerInternal").create("ghl_swank",e),u=s;l.default=u}),98);
__d("PercentVisible",[],(function(t,n,r,o,a,i){var e=-1,l=0,s=50,u=100;i.NO_VISIBLE=e,i.VISIBLE_0_PCT=l,i.VISIBLE_50_PCT=s,i.VISIBLE_100_PCT=u}),66);
__d("WebVpvDurationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1837580"),s=o("FalcoLoggerInternal").create("web_vpv_duration",e),u=s;l.default=u}),98);
__d("XPrivacySandboxTopicsAPIReportingControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/privacy_sandbox/topics/reporting/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("getCentralImpressionScrollSpeed",["cr:5662"],(function(t,n,r,o,a,i){"use strict";var e=0,l=Date.now(),s=null,u=null;function c(e){n("cr:5662").listen(window,"scroll",function(){u&&clearTimeout(u),u=setTimeout(function(){return e()},100)},n("cr:5662").Priority.NORMAL,{passive:!0})}function d(){var t=window.scrollY,n=Date.now();if(s!=null&&n!==l){var r=t-s;e=r/(n-l)*1e3}s=t,l=n}c(function(){e=0,s=null}),n("cr:5662").listen(window,"scroll",function(){return d()},n("cr:5662").Priority.NORMAL,{passive:!0}),a.exports=function(){return e}}),null);
__d("getCentralImpressionTimeAfterRefresh",[],(function(t,n,r,o,a,i){"use strict";var e=null;window.addEventListener("load",function(){e=Date.now()},{passive:!0});function l(){return e!=null?Date.now()-e:0}i.default=l}),66);
__d("gpsTopicsConstants",[],(function(t,n,r,o,a,i){"use strict";var e={LOGGING_EVENT_NAME:"topics_api_reporting",LOGGING_PROJECT_NAME:"privacy_sandbox_topics_api",MESSAGE_PREFIX:"[Topics API][Comet Reporting]"},l=e;i.default=l}),66);
__d("isTopicsAPIEnabledForReporting",["FBLogger","gkx","gpsTopicsConstants","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(){if(navigator.userAgent.indexOf("Chrome")<0){if(r("justknobx")._("4782")){var e=r("gpsTopicsConstants").MESSAGE_PREFIX+" user-agent topic reporting check failed for agent: "+navigator.userAgent;r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).debug(e)}return!1}return r("gkx")("6546")}l.default=e}),98);
__d("localStorageAccessor",["FBLogger","WebStorage","gpsTopicsConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){try{var t=(e||(e=r("WebStorage"))).getLocalStorage();if(t==null)return!1}catch(e){var n=e instanceof Error&&Object.prototype.hasOwnProperty.call(e,"message")?e.message:"Unknown",o=r("gpsTopicsConstants").MESSAGE_PREFIX+" isLocalItemSupported issue: "+n;return r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).warn(o),!1}return!0},u=function(n,o){if(s()){var t=(e||(e=r("WebStorage"))).getLocalStorage();e.setItemGuarded(t,n,o.toString())}},c=function(n){if(!s())return null;var t=(e||(e=r("WebStorage"))).getLocalStorage();if(t==null)return null;var o=t.getItem(n);if(o==null)return null;var a=Number(o);return a};l.isLocalItemSupported=s,l.getLocalItem=c,l.setLocalItem=u}),98);
__d("registerSourceForView",["DTSG","DTSGUtils","SprinkleConfig","XCometPrivacySandboxRegisterSourceControllerRouteBuilder","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(r("justknobx")._("1464")){var n={eventSourceEligible:!0,triggerEligible:!1},a={},i=r("XCometPrivacySandboxRegisterSourceControllerRouteBuilder").buildUri({}).toString();e!=null&&e.length>0?a.eid=e:t!=null&&t.length>0&&(a.xt=t);var l=o("DTSG").getToken();l!=null&&l.length>0&&(a.fb_dtsg=l,r("SprinkleConfig").param_name.length>0&&(a[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(l)));var s=Object.keys(a).map(function(e){return[encodeURIComponent(e),encodeURIComponent(a[e])].join("=")}).join("&");window.fetch(i,{attributionReporting:n,body:s,headers:{"Content-Type":"application/x-www-form-urlencoded"},keepalive:!0,method:"POST"}).catch(function(){})}}l.default=e}),98);
__d("shouldReportTopicsOnSchedule",["FBLogger","gpsTopicsConstants","justknobx","localStorageAccessor"],(function(t,n,r,o,a,i,l){"use strict";var e="topicsLastReportingTime",s=36e5;function u(){var t=r("justknobx")._("4782"),n=o("localStorageAccessor").isLocalItemSupported();if(t){var a=r("gpsTopicsConstants").MESSAGE_PREFIX+" on-schedule reporting support status: "+String(n)+", for reporting agent: "+navigator.userAgent;r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).debug(a)}if(!n)return!1;var i=!1;try{var l=o("localStorageAccessor").getLocalItem(e);if(l==null)return o("localStorageAccessor").setLocalItem(e,Date.now()),!0;var u=Number(l),c=Date.now(),d=Number(c),m=r("justknobx")._("4792");i=d-u>=m*s,i&&o("localStorageAccessor").setLocalItem(e,Date.now())}catch(e){var p=e instanceof Error&&Object.prototype.hasOwnProperty.call(e,"message")?e.message:"Unknown",_=r("gpsTopicsConstants").MESSAGE_PREFIX+" shouldReportTopicsOnSchedule issue: "+p;r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).warn(_),i=!1}return i}l.default=u}),98);
__d("reportTopicsForView",["DTSG","DTSGUtils","FBLogger","SprinkleConfig","XPrivacySandboxTopicsAPIReportingControllerRouteBuilder","gkx","gpsTopicsConstants","isTopicsAPIEnabledForReporting","shouldReportTopicsOnSchedule"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){var e={};e.token=t;var n=o("DTSG").getToken();return n!=null&&n.length>0&&(e.fb_dtsg=n,r("SprinkleConfig").param_name.length>0&&(e[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(n))),e},s=function(t){window.fetch(r("XPrivacySandboxTopicsAPIReportingControllerRouteBuilder").buildURL({}),{body:Object.keys(t).map(function(e){return[encodeURIComponent(e),encodeURIComponent(t[e])].join("=")}).join("&"),browsingTopics:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},keepalive:!0,method:"POST",skipObservation:!0}).catch(function(e){var t=e==null?"Unknown":e.message,n=r("gpsTopicsConstants").MESSAGE_PREFIX+" reportTopicsThroughRouter issue: "+t;r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).warn(n)})};function u(t){if(!(t==null||t.length===0))try{if(!r("isTopicsAPIEnabledForReporting")()||!r("shouldReportTopicsOnSchedule")())return;s(e(t))}catch(e){var n=e instanceof Error&&Object.prototype.hasOwnProperty.call(e,"message")?e.message:"Unknown",o=r("gpsTopicsConstants").MESSAGE_PREFIX+" reportTopicsForView issue: "+n;r("FBLogger")(r("gpsTopicsConstants").LOGGING_PROJECT_NAME,r("gpsTopicsConstants").LOGGING_EVENT_NAME).warn(o)}}function c(e){e==null||e.length===0||r("gkx")("13576")&&u(e)}l.reportTopicsForView=u,l.reportTopicsForViewMainObserver=c}),98);
__d("sendImpressionEnterActionValidationData",["CometMetricsChannel2ViewabilityFalcoEvent","CometTimeSpentNavigation","WebSession","getCentralImpressionScrollSpeed","getCentralImpressionTimeAfterRefresh","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){var i=t.impressedAt,l=r("CometTimeSpentNavigation").getPathInfo(),s=r("uuidv4")(),u=r("getCentralImpressionScrollSpeed")(),c=o("WebSession").getId(),d={intersect_rect:t.intersectionRect,root:t.rootBounds,target_rect:t.boundingClientRect};r("CometMetricsChannel2ViewabilityFalcoEvent").logImmediately(function(){return{csp:a.csp!=null?String(a.csp):"",cts:i.toString(),eid:a.eid!=null?String(a.eid):"",event_trace_id:s,framework:e,me:l?l.name:null,pre_rs:n?n.invisibleReason:null,rects:d,scroll_speed:u.toString(),sk:c,time_from_load:r("getCentralImpressionTimeAfterRefresh")().toString(),vp:t.visiblePercentage.toString(),xt:a.xt!=null?String(a.xt):""}})}l.default=e}),98);
__d("sendImpressionExitActionValidationData",["CometMetricsChannel2ViewabilityFalcoEvent","CometTimeSpentNavigation","WebSession","getCentralImpressionScrollSpeed","getCentralImpressionTimeAfterRefresh","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){var i=t.impressedAt,l=r("CometTimeSpentNavigation").getPathInfo(),s=r("uuidv4")(),u=i?Date.now()-i:null,c={intersect_rect:t.intersectionRect,root:t.rootBounds,target_rect:t.boundingClientRect};r("CometMetricsChannel2ViewabilityFalcoEvent").logImmediately(function(){return{csp:a.csp!=null?String(a.csp):"",cts:String(i),duration:u!=null?String(u):null,eid:a.eid!=null?String(a.eid):"",event_trace_id:s,exit_rs:t.invisibleReason,framework:e,me:l?l.name:null,pre_rs:Object.prototype.hasOwnProperty.call(a,"pre_rs")?String(a.pre_rs):"",pre_vp:n?String(n.visiblePercentage):null,rects:c,scroll_speed:r("getCentralImpressionScrollSpeed")().toString(),sk:o("WebSession").getId(),time_from_load:r("getCentralImpressionTimeAfterRefresh")().toString(),vp:t.visiblePercentage.toString(),xt:a.xt!=null?String(a.xt):""}})}l.default=e}),98);
__d("useCometFeedUnitGapInfo",["CometFeedUnitStatusListPassiveContext","FBLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useRef,m=function(t){return t==="SPONSORED"||t==="ENGAGEMENT"||t==="FIXED_POSITION"||t==="PROMOTION"};function p(){var e=o("react-compiler-runtime").c(4),t=d(null),n=c(r("CometFeedUnitStatusListPassiveContext")),a;e[0]!==n?(a=function(t){if(n==null)return null;if(t<0)return r("FBLogger")("comet_feed").mustfix("computeGapInfoForPosition called with invalid feed position %s",t),null;var e=n(),o=e[t];if(o==null)return e.length>0&&r("FBLogger")("comet_feed").mustfix("feed position %s does not exist in getFeedUnitStatusListPassive (length:%s)",t,e.length),null;var a=o.category;if(!m(a))return null;for(var i=o.minGapType,l=-1,s=-1,u=-1,c=-1,d=t-1;d>=0;d--){var p,_=t-d,f=(p=e[d])==null?void 0:p.category;e:switch(f){case"ENGAGEMENT":{l=l===-1?_:l;break e}case"FIXED_POSITION":{s=s===-1?_:s;break e}case"PROMOTION":{u=u===-1?_:u;break e}case"SPONSORED":c=c===-1?_:c}if(l!==-1&&s!==-1&&u!==-1&&c!==-1)break}return{dist_to_engagement:l,dist_to_fixed:s,dist_to_promo:u,dist_to_sponsored:c,dist_to_top:t+1,min_gap_type:i,story_category:a}},e[0]=n,e[1]=a):a=e[1];var i=a,l;return e[2]!==i?(l=function(n){var e=t.current;return(n<0||e==null||e.dist_to_top!==n+1)&&(t.current=i(n)),t.current},e[2]=i,e[3]=l):l=e[3],l}l.default=p}),98);
__d("useCometGHLDisplayMonitor",["CometGHLDisplayMonitor","GHLSurfaceContainerContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect,d=s.useRef;function m(e,t){var n=o("react-compiler-runtime").c(5),a=d(null),i=u(r("GHLSurfaceContainerContext")),l,s;return n[0]!==i||n[1]!==e||n[2]!==t?(l=function(){var n=null,r=Date.now();if(i!==null&&e)return n=o("CometGHLDisplayMonitor").m(i,{onLogBlockCallback:t,startTime:r,targetRef:a}),function(){n&&n.dispose()}},s=[i,e,t],n[0]=i,n[1]=e,n[2]=t,n[3]=l,n[4]=s):(l=n[3],s=n[4]),c(l,s),a}l.default=m}),98);
__d("useCometGHLFeedSurvey",["CometGHLTracker","DebugOwl","GhlSwankFalcoEvent","cr:1088657","react","react-compiler-runtime","useCometGHLDisplayMonitor","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e){var t=o("react-compiler-runtime").c(16),a=e.encryptedToken,i=e.id,l=e.isDisabled,s=e.position,u=e.type,p=l===void 0?!1:l,_=m(!1),f=_[0],g=_[1],h=d(null),y;t[0]!==a||t[1]!==f||t[2]!==s?(y=function(t){if(!(f||a==null)){g(!0),r("GhlSwankFalcoEvent").log(function(){return{hd:String(t),sli:String(s),xt:a}});var e=h.current;e!==null&&(o("CometGHLTracker").m(e),n("cr:1088657")&&n("cr:1088657").b({e:e,hd:t,token:a!=null?a:""}))}},t[0]=a,t[1]=f,t[2]=s,t[3]=y):y=t[3];var C=y,b=r("useCometGHLDisplayMonitor")(!f&&!p,C),v;t[4]!==b.current?(v=function(){h.current=b.current},t[4]=b.current,t[5]=v):v=t[5];var S;t[6]!==b?(S=[b],t[6]=b,t[7]=S):S=t[7],c(v,S);var R;t[8]!==b.current?(R=function(){var e=b.current;return function(){e&&o("CometGHLTracker").d(e)}},t[8]=b.current,t[9]=R):R=t[9];var L;t[10]!==b?(L=[b],t[10]=b,t[11]=L):L=t[11],c(R,L);var E;t[12]!==i||t[13]!==s||t[14]!==u?(E=function(t){r("DebugOwl").nest(t,{id:i,location:"FEED",position:s,type:u})},t[12]=i,t[13]=s,t[14]=u,t[15]=E):E=t[15];var k=E;return r("useMergeRefs")(b,k)}var _=p;l.default=_}),98);
__d("useFullViewImpression",["react","react-compiler-runtime","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(7),n=e.onFullViewStart,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1},t[0]=a):a=t[0];var i=c(a),l;t[1]!==n?(l=function(t){var e=t.entry,r=t.isElementVisible;if(!r&&i.current.hasBeenFullyViewed)i.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1};else if(r&&!i.current.hasBeenFullyViewed&&(e.intersectionRatio===1?(i.current.bottomRight=!0,i.current.topLeft=!0):(i.current.bottomRight||(i.current.bottomRight=e.boundingClientRect.bottom<=e.rootBounds.bottom&&e.boundingClientRect.right<=e.rootBounds.right),i.current.topLeft||(i.current.topLeft=e.boundingClientRect.top>=e.rootBounds.top&&e.boundingClientRect.left>=e.rootBounds.left)),i.current.bottomRight&&i.current.topLeft))return i.current.hasBeenFullyViewed=!0,n({currentTime:Date.now()})},t[1]=n,t[2]=l):l=t[2];var s=l,u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(t){i.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1}},t[3]=u):u=t[3];var d=u,m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m={thresholdOverride:"EXPENSIVE"},t[4]=m):m=t[4];var p;return t[5]!==s?(p={onHidden:d,onIntersection:s,options:m},t[5]=s,t[6]=p):p=t[6],r("useVisibilityObserver")(p)}l.default=d}),98);
__d("useStoryFullViewLogger",["CometMetricsFullViewFalcoEvent","react","react-compiler-runtime","requireDeferred","useFullViewImpression","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef,d=r("requireDeferred")("Banzai").__setRef("useStoryFullViewLogger");function m(e,t,n){var a=o("react-compiler-runtime").c(5),i=c(!1),l;a[0]!==t||a[1]!==e?(l=function(o){if(!i.current&&e!=null){i.current=!0;var n=e,a=t,l=r("uuidv4")(),s={csp:a,event_trace_id:l,xt:n};r("CometMetricsFullViewFalcoEvent").log(function(){return{csp:a.toString(),event_trace_id:l,xt:n}}),d.onReady(function(e){e.post("comet_metrics:full_view",s)})}},a[0]=t,a[1]=e,a[2]=l):l=a[2];var s=l,u;return a[3]!==s?(u={onFullViewStart:s},a[3]=s,a[4]=u):u=a[4],r("useFullViewImpression")(u)}l.default=m}),98);
__d("useStoryObserverImpressionLogger",["BrandSafetyOpportunityLossRateFalcoEvent","Comet2ndChannelContext","CometAdsProductLogger","CometFeed5sImpressionDelayContext","CometFeedAdsProductContext","CometFeedBrandSafetyContext","CometFeedBrandSafetyLoggingUtil","CometFeedUnitStatusListPassiveContext","CometGHLTracker","CometImpressionLoggingUtil","CometMetricsViewableImpressionFalcoEvent","CometTimeSpentNavigation","DebugOwl","FBLogger","WebSession","cr:1813330","ghlTestUBT","gkx","randomInt","react","registerSourceForView","reportTopicsForView","sendImpressionEnterActionValidationData","sendImpressionExitActionValidationData","setTimeout","useMinifiedProductAttribution","usePartialViewImpression","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef,p={can_delay_log_impression:!1,subsequent_gap_in_ms:6e4},_=5e3;function f(e,t,a,i,l,s){i===void 0&&(i=!1),l===void 0&&(l=null);var f=babelHelpers.extends({},p,a),h=m(null),y=m(null),C=m(null),b=m(!1),v=m(!1),S=(a==null?void 0:a.can_delay_log_impression)===!0,R=r("useMinifiedProductAttribution")();d(function(){r("ghlTestUBT")(function(e){b.current=e})},[]),d(function(){return function(){h.current=null,v.current=!1,C.current=null}},[l]);var L=c(r("CometFeedUnitStatusListPassiveContext")),E=c(r("Comet2ndChannelContext")),k=c(r("CometFeedBrandSafetyContext")),I=c(r("CometFeed5sImpressionDelayContext")),T=c(r("CometFeedAdsProductContext")),D=T.adId,x=T.minGapRule,$=T.minGapType,P=u(function(a){var l=a.entry,u=a.visibleTime;r("DebugOwl").perch(l.target),n("cr:1813330")==null||n("cr:1813330").setNewsFeedStoryPosition(t);var c=function(a,i){var n=Date.now(),l=r("CometTimeSpentNavigation").getPathInfo(),c=o("CometGHLTracker").c(a.target);r("DebugOwl").fly(a.target);var d=t,m=Math.floor(n/1e3),p=n+"_"+(r("randomInt")(0,4294967295)+1),_=c,f=l?l.name:null,h=o("WebSession").getId(),y=a.visiblePercentage,C=e,b=r("uuidv4")(),E=o("CometFeedBrandSafetyLoggingUtil").getBrandSafetyFieldForAdImpression(L,k,t,S),T;{var P;d==null&&r("FBLogger")("comet_impression").mustfix("storyPosition param %s is invalid. event_trace_id: %s, aidv2: %s",d,b,R),T=(P=d==null?void 0:d.toString())!=null?P:"0"}if(r("CometMetricsViewableImpressionFalcoEvent").logImmediately(function(){return{aidv2:R,brs:E,csp:T,cts:m.toString(),etid:p,event_trace_id:b,hba:_,isv:"1",me:f,sk:h,vp:y.toString(),xt:C}}),L){var N,M=L();((N=M[d])==null?void 0:N.category)==="SPONSORED"&&I.hasAnyAdImpressionAlreadyBeenLogged===!1&&(I.hasAnyAdImpressionAlreadyBeenLogged=!0,I.firstLoggedAdImpressionStoryPosition=t)}g(E,s,u,t),o("CometAdsProductLogger").logCometAdsProductGapRule({adId:D,csp:T,cts:m.toString(),endPoint:f,getFeedUnitStatusList:L,hba:_,isv:"1",minGapRule:x,minGapType:$,sessionKey:h,tracking:C,vp:y.toString()}),r("registerSourceForView")(null,C),o("reportTopicsForView").reportTopicsForViewMainObserver(s),v.current=!0},d={boundingClientRect:l.boundingClientRect,impressedAt:u,intersectionRect:l.intersectionRect,invisibleReason:null,rootBounds:l.rootBounds,status:"ENTER",target:l.target,visible:!0,visiblePercentage:l.intersectionRatio};if(i&&r("sendImpressionEnterActionValidationData")("impression_api_comet_enter",d,null,{csp:t,pre_rs:h.current,xt:e}),E){var m=E();o("CometImpressionLoggingUtil").logChannelData(D,e,d,m,o("CometImpressionLoggingUtil").TwoMFirstChannel)}if(!(C.current||y.current))if(f.can_delay_log_impression===!0&&(b.current||o("CometGHLTracker").b()||r("gkx")("23488"))){I.hasUserSeenAnyAd===!1&&(I.hasUserSeenAnyAd=!0,I.firstAdStoryPosition=t);var p=r("gkx")("23490"),T=p,P=o("CometGHLTracker").b(),N=!I.hasAnyAdImpressionAlreadyBeenLogged,M=T||P||N?_:0,w;r("gkx")("1718")?w=M:w=_,y.current=r("setTimeout")(function(){c&&c(d,"AD_BLOCKER"),y.current=null},w)}else c&&c(d,v.current?"DEDUP":"ORIGINAL")},[i,f.can_delay_log_impression,t,e,R]),N=u(function(n){var o=n.hiddenReason,a=n.visibleDuration,l=n.visibleTime;i&&r("sendImpressionExitActionValidationData")("impression_api_comet_exit",{impressedAt:l,invisibleReason:o,visiblePercentage:0},null,{csp:t,duration:a,pre_rs:h.current,xt:e}),h.current=o,!C.current&&(v.current||y.current)&&(C.current=r("setTimeout")(function(){v.current=!1,C.current=null},f.subsequent_gap_in_ms))},[f.subsequent_gap_in_ms,t,e,i]);return r("usePartialViewImpression")({onImpressionEnd:N,onImpressionStart:P})}function g(e,t,n,o){var a=e==null?void 0:e.brs_filter_setting;if(r("BrandSafetyOpportunityLossRateFalcoEvent")!=null&&parseInt(a,10)>0){var i=e==null?void 0:e.unit_after,l=e==null?void 0:e.unit_before;r("BrandSafetyOpportunityLossRateFalcoEvent").log(function(){var e,r,s,u;return{ad_insertion_status:"INSERTED",ad_insertion_sub_status:"VALID_COMPATIBLE",ad_inventory_filter:String(a),adjacent_edges_info:{unit_after:i!=null?{brs_content_label:(e=i.brs_content_label)!=null?e:"",organic_tracking:(r=i.organic_tracking)!=null?r:""}:null,unit_before:l!=null?{brs_content_label:(s=l.brs_content_label)!=null?s:"",organic_tracking:(u=l.organic_tracking)!=null?u:""}:null},client_token:t!=null?t:"",feed_session_id:"",impression_original_timestamp_ms:String(n),slot_position:String(o)}})}}l.default=f}),98);
__d("useStoryVPVDLogger",["CometFeedSessionIDContext","CometInteractionSourceContext","CometNewsFeedVPVDStore","FBMerlinImpressionManager","Random","WebSession","WebVpvDurationFalcoEvent","getGroupsSeoContainerIdFromRoute","gkx","isStringNullOrEmpty","react","react-compiler-runtime","requireDeferred","useCometFeedUnitGapInfo","useCurrentRoute","useGroupsCometSeoMetadataContext","useMinifiedProductAttribution","useVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useRef,m=r("requireDeferred")("ODS").__setRef("useStoryVPVDLogger"),p=function(t,n,r,a){var e,i={};if(a!=null&&a.role==="dub"){var l;i.consumption_language=(l=a.lang)!=null?l:""}else delete i.consumption_language;return babelHelpers.extends({},i,{csp:t.position,feed_session_id:r,is_agg:t.isAggregated,is_self:t.isSelfPost,is_seo:t.isSeoVisit,logged_before:t.loggedBefore,nav_attribution_id_v2:t.aidv2,seo_container_id:t.seoContainerId,sid_raw:o("WebSession").getId(),source:t.source,source_override:t.source_override,story_height:t.story_height,story_width:t.story_width,vpvd_start_timestamp_ms:t.visibleTime,vpvd_time_delta_ms:t.hiddenTime-((e=t.visibleTime)!=null?e:0),xt:t.encrypted_tracking},n)},_=1e3;function f(e){var t=o("react-compiler-runtime").c(23),n=e.igXARCommentID,a=e.interactionSourceOverride,i=e.isAggregated,l=e.isSelfPost,s=e.navChainOverride,u=e.position,f=e.targetAudioTrack,g=e.trackable,h=i===void 0?null:i,y=l===void 0?null:l,C=s===void 0?null:s,b=c(r("CometInteractionSourceContext")),v=c(r("CometFeedSessionIDContext")),S=r("useCometFeedUnitGapInfo")(),R=r("useCurrentRoute")()||{},L=R.tracePolicy,E=r("useMinifiedProductAttribution")()||"";C!=null&&(E=C);var k=c(o("CometNewsFeedVPVDStore").LoggerContext),I=k[0],T=k[1],D=d(null),x=d(null),$=d(!1),P;t[0]!==I?(P=function(t){var e,n,r,o,a=t.entry,i=t.visibleTime;I(i),D.current=(e=a==null||(n=a.boundingClientRect)==null?void 0:n.height)!=null?e:null,x.current=(r=a==null||(o=a.boundingClientRect)==null?void 0:o.width)!=null?r:null},t[0]=I,t[1]=P):P=t[1];var N=P,M=o("useGroupsCometSeoMetadataContext").useGroupsCometSeoMetadataContext(),w=M.isSeoVisit,A=r("useCurrentRoute")(),F;t[2]!==A?(F=r("getGroupsSeoContainerIdFromRoute")(A),t[2]=A,t[3]=F):F=t[3];var O=F,B=O.postID!=null?O.postID:O.groupID,W;t[4]!==E||t[5]!==v||t[6]!==S||t[7]!==B||t[8]!==n||t[9]!==b||t[10]!==a||t[11]!==h||t[12]!==y||t[13]!==w||t[14]!==u||t[15]!==T||t[16]!==f||t[17]!==L||t[18]!==g?(W=function(t){var e=t.hiddenTime,i=t.visibleTime;T(i);var l=a!=null?a:b;if(!r("FBMerlinImpressionManager").isMerlinVPVOnlySources(l)&&l===10){o("Random").coinflip(_)&&m.onReady(function(e){e.bumpEntityKey(3372,"comet.unknown_vpvd_tracepolicy",(L!=null?L:"empty")+"_"+l,_)});return}var s=D.current!=null?Math.round(D.current):null,c=x.current!=null?Math.round(x.current):null,d=S(u),C=p({aidv2:E,encrypted_tracking:g!=null?g:"",hiddenTime:e,isAggregated:h,isSelfPost:y,isSeoVisit:w,loggedBefore:$.current,position:u,seoContainerId:B,source:b,source_override:a,story_height:s,story_width:c,visibleTime:i},d,v.toString(),f);$.current=!0;var R=g,k=!r("isStringNullOrEmpty")(n)&&l===26;k&&(R=n);var I=r("FBMerlinImpressionManager").merlinShouldLog(l)||k,P=r("FBMerlinImpressionManager").isMerlinVPVOnlySources(l)||k,N=!I&&!P;I&&r("FBMerlinImpressionManager").logWithEnterAndExitTimestamps(i,e,R!=null?R:"",l,C),N&&r("WebVpvDurationFalcoEvent").log(function(){return{client_viewstate_position:JSON.stringify(C.csp),json_data:JSON.stringify(C)}})},t[4]=E,t[5]=v,t[6]=S,t[7]=B,t[8]=n,t[9]=b,t[10]=a,t[11]=h,t[12]=y,t[13]=w,t[14]=u,t[15]=T,t[16]=f,t[17]=L,t[18]=g,t[19]=W):W=t[19];var q=W,U;return t[20]!==q||t[21]!==N?(U={onVPVDEnd:q,onVPVDStart:N},t[20]=q,t[21]=N,t[22]=U):U=t[22],r("useVPVDImpression")(U)}l.default=f}),98);
__d("useViewabilityImpression",["react-compiler-runtime","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(3),n=e.onIntersection,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={thresholdOverride:"MODERATE"},t[0]=a):a=t[0];var i;return t[1]!==n?(i={onIntersection:n,options:a},t[1]=n,t[2]=i):i=t[2],r("useVisibilityObserver")(i)}l.default=e}),98);
__d("useStoryViewabilityDurationLogger",["Banzai","CometMetricsViewabilityFalcoEvent","PercentVisible","react","react-compiler-runtime","useViewabilityImpression","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e,t,n){r("CometMetricsViewabilityFalcoEvent").logImmediately(function(){return{cumulative:e.cumulative.toString(),duration:e.duration.toString(),event_trace_id:t,interval:e.interval.toString(),segment_id:e.segmentid.toString(),start_ts:e.startTs.toString(),view_event_type:e.eventType.toString(),xt:n}})}function m(e,t,n){var a=o("react-compiler-runtime").c(4),i=c(null),l=c(null),s=c(null),u;a[0]!==e?(u=function(n){var t=n.entry,a=n.isElementVisible,u=p,c=function(n){var t=r("uuidv4")(),o={cumulative:n.cumulative,duration:n.duration,event_trace_id:t,eventType:n.eventType,interval:n.interval,segmentid:n.segmentid,startTs:n.startTs,xt:e};d(n,t,e);var a=babelHelpers.extends({},r("Banzai").VITAL,{signal:!1});r("Banzai").post("comet_metrics:viewability",o,a)},m=function(t,n,r){if(r==null)return null;var e=u(t,r);return c(e),null},_=function(t,n,r){var e;return r==null?e={cumulative:0,duration:0,eventType:n,interval:0,segmentid:0,startTs:t}:e=u(t,r),e.segmentid<=2&&c(e),e};a?t.intersectionRatio<.5?(i.current=_(t.time,o("PercentVisible").VISIBLE_0_PCT,i.current),l.current=m(t.time,o("PercentVisible").VISIBLE_50_PCT,l.current),s.current=m(t.time,o("PercentVisible").VISIBLE_100_PCT,s.current)):t.intersectionRatio>=.5&&t.intersectionRatio<1?(i.current=_(t.time,o("PercentVisible").VISIBLE_0_PCT,i.current),l.current=_(t.time,o("PercentVisible").VISIBLE_50_PCT,l.current),s.current=m(t.time,o("PercentVisible").VISIBLE_100_PCT,s.current)):(i.current=_(t.time,o("PercentVisible").VISIBLE_0_PCT,i.current),l.current=_(t.time,o("PercentVisible").VISIBLE_50_PCT,l.current),s.current=_(t.time,o("PercentVisible").VISIBLE_100_PCT,s.current)):(i.current=m(t.time,o("PercentVisible").VISIBLE_0_PCT,i.current),l.current=m(t.time,o("PercentVisible").VISIBLE_50_PCT,l.current),s.current=m(t.time,o("PercentVisible").VISIBLE_100_PCT,s.current))},a[0]=e,a[1]=u):u=a[1];var m=u,_;return a[2]!==m?(_={onIntersection:m},a[2]=m,a[3]=_):_=a[3],r("useViewabilityImpression")(_)}function p(e,t){return{cumulative:e-t.startTs,duration:e-t.startTs,eventType:t.eventType,interval:e-t.cumulative-t.startTs,segmentid:t.segmentid+1,startTs:t.startTs}}l.default=m}),98);
__d("useStoryViewabilityLogger",["mergeRefs","react","useCometGHLFeedSurvey","useStoryFullViewLogger","useStoryObserverImpressionLogger","useStoryVPVDLogger","useStoryViewabilityDurationLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e,t,n){return d}function d(){return null}function m(e){var t=e.clientToken,n=e.clientViewConfig,o=n===void 0?null:n,a=e.contentIdentifier,i=a===void 0?null:a,l=e.disabledViewabilityEventTypes,d=e.encryptedTracking,m=e.interactionSourceOverride,p=e.position,_=e.shouldDisableGHLSurvey,f=_===void 0?!1:_,g=e.targetAudioTrack,h=e.viewabilityConfig,y=e.vpvdOptionalData,C=[];function b(e,t){return h&&h.includes(e)&&(!l||!l.includes(e))?t:null}var v=!!h&&h.some(function(e){return e===7}),S=b(8,r("useStoryObserverImpressionLogger")(d,p,o,v,i,t)),R=b(7,c(d,p,o)),L=b(2,r("useStoryFullViewLogger")(d,p,o)),E=b(3,r("useStoryViewabilityDurationLogger")(d,p,o)),k=r("useStoryVPVDLogger")(babelHelpers.extends({},y,{interactionSourceOverride:m,position:p,targetAudioTrack:g,trackable:d})),I=k[0],T=k[1];C.push(T);var D=b(5,I),x=r("useCometGHLFeedSurvey")({clientViewConfig:o,encryptedToken:d,isDisabled:f,position:p}),$=u(function(){return r("mergeRefs")(S,R,L,E,D,f?null:x,null)},[S,R,L,E,D,f,x]);return{debuggingInfoLoggers:C.map(function(e,t){return s.jsx("div",{children:e},t)}),ref:$}}l.default=m}),98);