;/*FB_PKG_DELIM*/

__d("CometVideoPlayerLoggingConfigForDisabledLogging",[],(function(t,n,r,o,a,i){"use strict";function e(){return{disableCVCSubscription:!0,disableLogging:!0,loggingToSNAPLCreateMetadataProvider:null,loggingToSNAPLEnabled:!1,loggingToVPLEnabled:!1}}i.createCometVideoPlayerLoggingConfigForDisabledLogging=e}),66);
__d("MediaPlaybackCompoundEventUtils",["CometProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null&&e.v2&&(e==null?void 0:e.v2.length)>0){var t=e==null?void 0:e.v2,n=t[t.length-1];return[n.class,n.module].map(o("CometProductAttribution").filterEntryValue).join(":")}return""}function s(e){var t=0;switch(e){case"autoplay_initiated":t=1;break;case"loop_initiated":t=7;break;case"product_initiated":t=8;break;case"user_initiated":t=2;break;default:break}return t}function u(e){var t="unknown";switch(e){case"EXCELLENT":t="excellent";break;case"GOOD":t="good";break;case"MODERATE":t="moderate";break;case"POOR":t="poor";break;default:break}return t}function c(e){return e?"on":"off"}function d(e){if(typeof e=="string")return e;if(typeof e=="number")return e.toString()}function m(t){return t.productAttribution!=null?e(t.productAttribution):void 0}function p(e){return e.productAttribution!=null?o("CometProductAttribution").minifyProductAttributionV2(e.productAttribution):void 0}l.minifyProductAttributionV2Root=e,l.getMediaPlaybackPlayReason=s,l.getMediaPlaybackDataConnectionQuality=u,l.getMediaPlaybackCaptionState=c,l.stringifyMediaPlaybackMetadata=d,l.getMediaPlaybackAttributionIDV2Root=m,l.getMediaPlaybackAttributionIDV2=p}),98);
__d("MediaPlaybackMetadataProvider",["MediaPlaybackCompoundEventUtils","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","getPlayerFormatForLogData","mapObject"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=function(t){return s=s!=null?s:document.createElement("video"),"canPlayType"in s?s.canPlayType(t):""};function c(e){var t=e.controlledState.playbackState;switch(t){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:return"unknown"}}function d(t,n,o,a,i){var l=t.controlledState.error===o?babelHelpers.extends({},t,{controlledState:babelHelpers.extends({},t.controlledState,{error:{$ref:"$.player.lastError"}})}):t;t.uncontrolledState.videoElementError!=null&&(l=babelHelpers.extends({},l,{uncontrolledState:babelHelpers.extends({},l.uncontrolledState,{videoElementError:{code:t.uncontrolledState.videoElementError.code,message:t.uncontrolledState.videoElementError.message}})}));var s=n;{var d=typeof n.payload=="object"&&n.payload!=null?n.payload:null;if(d!=null){var m={};Object.keys(d).forEach(function(e){var t=d[e];t===o?m[e]={$ref:"$.player.lastError"}:m[e]=t}),s=babelHelpers.extends({},n,{payload:m})}}var p={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","application/x-mpegURL":"application/x-mpegURL","video/mp4":"video/mp4","video/ogg":"video/ogg","video/webm":"video/webm"};return{currentVideo:{audioStreamId:t.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:t.controlledState.captionsLoaded,isDrm:!!i.graphQLVideoDRMInfo,isHD:void 0,isLiveStream:i.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:t.uncontrolledState.videoProjection,resourceUrl:void 0,streamId:t.uncontrolledState.videoRepresentationID,streamType:t.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:i.videoFBID},player:{canPlayType:(e||(e=r("mapObject")))(p,u),dimensions:a.dimensions?{height:a.dimensions.height,width:a.dimensions.width}:null,droppedFrames:t.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:o,loggedError:void 0,stallCount:void 0,stallTime:void 0,state:c(t),totalFrames:t.uncontrolledState.videoElementTotalFrameCount,version:t.playerVersion,videoSource:void 0,viewabilityPercentage:t.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:s,state:l}}}function m(e){var t=e.action,n=e.coreVideoPlayerMetaData,r=e.loggingMetaData,a=e.state,i=e.videoPlayerError,l=i.errorMessageFormat,s=i.errorName,u=i.errorType,c=i.errorCode==null||i.errorCode===""?s:i.errorCode,m=d(a,t,i,r,n),p={code:c,description:l,domain:s,error:s,type:String(u!=null?u:o("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(s,l)),user_info:JSON.stringify(m)};return p}function p(e,t,n,r){var o,a,i,l=_(e,t,n);return{attribution_id_v2_root:void 0,author_id:r.author_id,current_watching_module:(o=r.current_watching_module)!=null?o:"",is_audio_only:t.audioOnly,is_live_streaming:(a=t.isLiveStreaming)!=null?a:void 0,media_id:t.videoFBID,nav_chain:r.nav_chain,player_format:l.player_format,player_origin:t.playerOriginOverride,player_suborigin:t.subOrigin,player_version:e.playerVersion,sessionizer_nav_chain:void 0,tracking_data_encrypted:n.trackingDataEncrypted,tracking_token:r.tracking_token,tracking_type:(i=r.tracking_type)!=null?i:"none",video_play_reason:l.video_play_reason}}function _(e,t,n){var a,i,l,s,u,c,d,m;return{attribution_id_v2:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2(n),audio_representation_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.audioRepresentationID),autoplay_eligible:t.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(t.autoplayGatingResult?[t.autoplayGatingResult]:[]),autoplay_setting:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.autoplaySetting),available_qualities_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.availableQualities.length),caption_format:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.captionFormat),caption_locale:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.captionsLocale),caption_state:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackCaptionState(e.controlledState.captionsVisible),client_latency_setting:e.controlledState.latencyLevel,current_viewability:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.viewabilityPercentage),dash_manifest_identifier:e.uncontrolledState.manifestIdentifier,data_connection_quality:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackDataConnectionQuality(o("VideoPlayerConnectionQuality").evaluate(function(){return e.uncontrolledState.estimatedBandwidth})),downstream_share_origin_uri:(a=n.downstreamShareSignalTracking)==null?void 0:a.downstream_share_session_origin_uri,downstream_share_start_time:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata((i=n.downstreamShareSignalTracking)==null?void 0:i.downstream_share_session_start_time),downstream_share_visit_uuid:(l=n.downstreamShareSignalTracking)==null?void 0:l.downstream_share_session_id,dropped_frame_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoElementDroppedFrameCount),external_log_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.externalLogID),external_log_type:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.externalLogType),is_abr_enabled:e.isAbrEnabled,is_fbms:(s=e.uncontrolledState.isFBMS)!=null?s:void 0,is_live_video_rewound:e.controlledState.isLiveRewindActive,is_mixed_codec_manifest:(u=e.uncontrolledState.isMixedCodecManifest)!=null?u:void 0,is_predictive_playback:e.uncontrolledState.isPredictiveDash,mpd_validation_errors:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.mpdValidationErrors),playback_speed:e.uncontrolledState.videoElementPlaybackRate,player_format:r("getPlayerFormatForLogData")({isDesktopPictureInPicture:(c=e.controlledState.isDesktopPictureInPicture)!=null?c:!1,isFullscreen:e.uncontrolledState.isFullscreen},t.playerFormat),player_sound_on:!(e.controlledState.muted||e.controlledState.volume===0),projection:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoProjection),streaming_format:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.streamingFormat),total_frame_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoElementTotalFrameCount),video_bandwidth:(d=e.uncontrolledState.estimatedBandwidth)!=null?d:void 0,video_play_reason:e.controlledState.lastPlayReason!=null?o("MediaPlaybackCompoundEventUtils").getMediaPlaybackPlayReason(e.controlledState.lastPlayReason):null,video_projection:(m=e.uncontrolledState.videoProjection)!=null?m:void 0,video_representation_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoRepresentationID),view_height:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(Math.floor(n.dimensions.height)),view_width:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(Math.floor(n.dimensions.width))}}l.getSNAPLErrorMetadataCommon=m,l.getSNAPLRequiredMetadataCommon=p,l.getSNAPLTagMetadataCommon=_}),98);
__d("FBVideoMetadataProvider",["MediaPlaybackCompoundEventUtils","MediaPlaybackMetadataProvider","getVideoBrowserTabId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{getErrorMetadata:o("MediaPlaybackMetadataProvider").getSNAPLErrorMetadataCommon,getRequiredMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,a=t.loggingMetaData,i=t.state,l=e.adClientToken==null?"organic":"paid",s=o("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2Root(a),u=o("MediaPlaybackMetadataProvider").getSNAPLRequiredMetadataCommon(i,e,a,n),c=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(i,e,a),d=babelHelpers.extends({},u,{browser_tab_id:r("getVideoBrowserTabId")(),current_watching_module:"",nav_chain:c.attribution_id_v2,sessionizer_nav_chain:s!=null?s:null,tracking_token:void 0,tracking_type:l,trackings:void 0});return d},getTagMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,r=t.loggingMetaData,a=t.state,i=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(a,e,r),l=babelHelpers.extends({},i,{video_chaining_depth_level:n.video_chaining_depth_level,video_chaining_parent_video_id:n.video_chaining_parent_video_id,video_chaining_session_id:n.video_chaining_session_id});return l}}}l.createFBVideoMetadataProvider=e}),98);